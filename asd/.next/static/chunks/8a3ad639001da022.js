(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97873,e=>{"use strict";var t=e.i(94606),a=e.i(23952);function r({className:e,type:r,...n}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}e.s(["Input",()=>r])},34772,e=>{"use strict";let t=[{id:"admin-1",email:"admin@greenflowers.kz",name:"Администратор",phone:"+7 708 235 4533",role:"admin",createdAt:new Date("2024-01-01")},{id:"employee-1",email:"worker@greenflowers.kz",name:"Работник Склада",phone:"+7 777 111 2222",role:"employee",createdAt:new Date("2024-03-01")},{id:"client-1",email:"client@test.kz",name:"Иван Петров",phone:"+7 777 333 4444",role:"user",city:"Алматы",createdAt:new Date("2024-06-01")}];e.s(["kazakhstanCities",0,[{id:"almaty",name:{ru:"Алматы",en:"Almaty",kk:"Алматы"}},{id:"astana",name:{ru:"Астана",en:"Astana",kk:"Астана"}},{id:"shymkent",name:{ru:"Шымкент",en:"Shymkent",kk:"Шымкент"}},{id:"karaganda",name:{ru:"Караганда",en:"Karaganda",kk:"Қарағанды"}},{id:"aktobe",name:{ru:"Актобе",en:"Aktobe",kk:"Ақтөбе"}},{id:"taraz",name:{ru:"Тараз",en:"Taraz",kk:"Тараз"}},{id:"pavlodar",name:{ru:"Павлодар",en:"Pavlodar",kk:"Павлодар"}},{id:"ust-kamenogorsk",name:{ru:"Усть-Каменогорск",en:"Ust-Kamenogorsk",kk:"Өскемен"}},{id:"semey",name:{ru:"Семей",en:"Semey",kk:"Семей"}},{id:"atyrau",name:{ru:"Атырау",en:"Atyrau",kk:"Атырау"}},{id:"kostanay",name:{ru:"Костанай",en:"Kostanay",kk:"Қостанай"}},{id:"petropavlovsk",name:{ru:"Петропавловск",en:"Petropavlovsk",kk:"Петропавл"}},{id:"oral",name:{ru:"Уральск",en:"Oral",kk:"Орал"}},{id:"aktau",name:{ru:"Актау",en:"Aktau",kk:"Ақтау"}},{id:"kyzylorda",name:{ru:"Кызылорда",en:"Kyzylorda",kk:"Қызылорда"}},{id:"turkestan",name:{ru:"Туркестан",en:"Turkestan",kk:"Түркістан"}}],"mockUsers",0,t])},55828,e=>{"use strict";var t=e.i(34772);let a=[{id:"PRE-001",clientId:"client-4",clientName:"ТОО Праздник",clientPhone:"+7 777 111 2222",cityId:"almaty",items:[{productId:14,productName:"8 Марта микс",quantity:50,pricePerBox:75e3,total:375e4},{productId:12,productName:"Тюльпаны весенняя коллекция",quantity:20,pricePerBox:35e3,total:7e5}],total:445e4,status:"confirmed",holidayType:"march8",deliveryDate:"2025-03-01",createdAt:new Date("2024-11-15"),notes:"Крупный заказ на 8 Марта"},{id:"PRE-002",clientId:"client-5",clientName:"Цветы 24",clientPhone:"+7 777 999 0000",cityId:"astana",items:[{productId:13,productName:"Валентинов микс красный",quantity:30,pricePerBox:9e4,total:27e5}],total:27e5,status:"pending",holidayType:"valentine",deliveryDate:"2025-02-10",createdAt:new Date("2024-12-01")}];function r(e,a="ru"){let n=t.kazakhstanCities.find(t=>t.id===e);return n?.name[a]||e}function n(e,t="ru"){return({pending:{ru:"Ожидает",en:"Pending",kk:"Күтуде"},confirmed:{ru:"Подтверждён",en:"Confirmed",kk:"Расталды"},in_transit:{ru:"В пути",en:"In Transit",kk:"Жолда"},delivered:{ru:"Доставлен",en:"Delivered",kk:"Жеткізілді"},cancelled:{ru:"Отменён",en:"Cancelled",kk:"Бас тартылды"}})[e]?.[t]||e}function i(e){switch(e){case"pending":return"bg-yellow-100 text-yellow-700";case"confirmed":return"bg-blue-100 text-blue-700";case"in_transit":return"bg-indigo-100 text-indigo-700";case"delivered":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}}e.s(["getCityName",()=>r,"getStatusColor",()=>i,"getStatusLabel",()=>n,"holidayTypes",0,[{id:"valentine",name:{ru:"14 Февраля (День Святого Валентина)",en:"Valentine's Day",kk:"14 Ақпан"}},{id:"march8",name:{ru:"8 Марта (Международный женский день)",en:"International Women's Day",kk:"8 Наурыз"}},{id:"nauryz",name:{ru:"Наурыз (21-23 марта)",en:"Nauryz",kk:"Наурыз"}},{id:"mothersday",name:{ru:"День Матери",en:"Mother's Day",kk:"Аналар күні"}},{id:"september1",name:{ru:"1 Сентября (День Знаний)",en:"Knowledge Day",kk:"1 Қыркүйек"}},{id:"teachersday",name:{ru:"День Учителя",en:"Teacher's Day",kk:"Мұғалімдер күні"}},{id:"newyear",name:{ru:"Новый Год",en:"New Year",kk:"Жаңа Жыл"}},{id:"other",name:{ru:"Другой праздник",en:"Other Holiday",kk:"Басқа мереке"}}],"mockPreorders",0,a])},92402,e=>{"use strict";var t=e.i(94606),a=e.i(62415),r=e.i(35124),n=e.i(55828),i=e.i(63918),s=e.i(97873),l=e.i(52572),d=e.i(42268);function o(){let{user:e}=(0,l.useAuth)(),[o,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[x,p]=(0,a.useState)(""),[k,g]=(0,a.useState)("all");(0,a.useEffect)(()=>{(async()=>{if(e?.id)try{m(!0);let t=await d.api.getAllOrders(e.id);c(t.orders||[])}catch(e){console.error("Failed to fetch orders:",e)}finally{m(!1)}})()},[e]);let y=o.filter(e=>{let t=e.id.toString().includes(x)||e.user_name.toLowerCase().includes(x.toLowerCase()),a="all"===k||e.status===k;return t&&a}),h=async(t,a)=>{if(e?.id)try{await d.api.updateOrderStatus(e.id,t,a),c(o.map(e=>e.id===t?{...e,status:a}:e))}catch(e){console.error("Failed to update order status:",e)}};return u?(0,t.jsx)(r.DashboardLayout,{title:"Заказы клиентов",requiredRole:"worker",children:(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Загрузка заказов..."})})}):(0,t.jsxs)(r.DashboardLayout,{title:"Заказы клиентов",requiredRole:"worker",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)(s.Input,{placeholder:"Поиск по номеру или клиенту...",value:x,onChange:e=>p(e.target.value),className:"max-w-xs"}),(0,t.jsxs)("select",{value:k,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-input rounded-md bg-background",children:[(0,t.jsx)("option",{value:"all",children:"Все статусы"}),(0,t.jsx)("option",{value:"pending",children:"Ожидает"}),(0,t.jsx)("option",{value:"confirmed",children:"Подтверждён"}),(0,t.jsx)("option",{value:"in_transit",children:"В пути"}),(0,t.jsx)("option",{value:"delivered",children:"Доставлен"}),(0,t.jsx)("option",{value:"cancelled",children:"Отменён"})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:0===y.length?(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center text-gray-500",children:"Заказы не найдены"}):y.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900",children:["#",e.id]}),(0,t.jsx)("span",{className:`px-2 py-1 text-xs rounded-full ${(0,n.getStatusColor)(e.status)}`,children:(0,n.getStatusLabel)(e.status)})]}),(0,t.jsx)("p",{className:"text-gray-700",children:e.user_name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.user_phone}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Город: ",e.delivery_city]}),e.delivery_date&&(0,t.jsxs)("p",{className:"text-sm font-medium text-[#568a56]",children:["Доставка: ",new Date(e.delivery_date).toLocaleDateString("ru-RU")]}),e.notes&&(0,t.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:["Примечание: ",e.notes]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"text-2xl font-bold text-[#568a56]",children:[e.total_amount.toLocaleString()," KZT"]})})]}),(0,t.jsxs)("div",{className:"border-t border-gray-100 pt-4 mb-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Товары:"}),(0,t.jsx)("div",{className:"space-y-1",children:e.items.map((e,a)=>(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-gray-600",children:[e.product_name," x ",e.quantity," шт."]}),(0,t.jsxs)("span",{className:"text-gray-900",children:[(e.unit_price*e.quantity).toLocaleString()," KZT"]})]},a))})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:["pending"===e.status&&(0,t.jsx)(i.Button,{size:"sm",onClick:()=>h(e.id,"confirmed"),className:"bg-blue-500 hover:bg-blue-600",children:"Подтвердить"}),"confirmed"===e.status&&(0,t.jsx)(i.Button,{size:"sm",onClick:()=>h(e.id,"in_transit"),className:"bg-purple-500 hover:bg-purple-600",children:"Отправить"}),"in_transit"===e.status&&(0,t.jsx)(i.Button,{size:"sm",onClick:()=>h(e.id,"delivered"),className:"bg-green-500 hover:bg-green-600",children:"Доставлен"})]})]},e.id))})]})}e.s(["default",()=>o])}]);