{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/User/Downloads/flowers%20%286%29/sdfg/lib/trucks-api.ts"],"sourcesContent":["const API_BASE_URL =\r\n  process.env.NEXT_PUBLIC_API_URL || \"http://localhost:5000/api\";\r\n\r\nexport interface TruckMetric {\r\n  name: string;\r\n  value: string | number;\r\n  unit?: string;\r\n}\r\n\r\nexport interface Truck {\r\n  id: string;\r\n  identifier: string;\r\n  arrival_date: string;\r\n  status: \"pending\" | \"in_transit\" | \"delivered\" | \"delayed\";\r\n  notes?: string;\r\n  metrics?: TruckMetric[];\r\n  created_by?: string;\r\n  created_by_name?: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nexport interface TrucksListResponse {\r\n  success: boolean;\r\n  data: Truck[];\r\n  pagination: {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    pages: number;\r\n  };\r\n}\r\n\r\nexport interface AnalyticsSummary {\r\n  total_trucks: number;\r\n  delivered: number;\r\n  in_transit: number;\r\n  delayed: number;\r\n  avg_quantity: number;\r\n  total_quantity: number;\r\n}\r\n\r\nclass TrucksApiClient {\r\n  async getTrucks(\r\n    page = 1,\r\n    limit = 10,\r\n    filters?: {\r\n      identifier?: string;\r\n      dateFrom?: string;\r\n      dateTo?: string;\r\n      status?: string;\r\n      sortBy?: string;\r\n      order?: string;\r\n    }\r\n  ): Promise<TrucksListResponse> {\r\n    const params = new URLSearchParams({\r\n      page: page.toString(),\r\n      limit: limit.toString(),\r\n      sortBy: filters?.sortBy || \"arrival_date\",\r\n      order: filters?.order || \"DESC\",\r\n    });\r\n\r\n    if (filters?.identifier) params.append(\"identifier\", filters.identifier);\r\n    if (filters?.dateFrom) params.append(\"dateFrom\", filters.dateFrom);\r\n    if (filters?.dateTo) params.append(\"dateTo\", filters.dateTo);\r\n    if (filters?.status) params.append(\"status\", filters.status);\r\n\r\n    const response = await fetch(`${API_BASE_URL}/trucks?${params}`, {\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (!response.ok) throw new Error(\"Failed to fetch trucks\");\r\n    return response.json();\r\n  }\r\n\r\n  async getTruck(id: string): Promise<{ success: boolean; data: Truck }> {\r\n    const response = await fetch(`${API_BASE_URL}/trucks/${id}`, {\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (!response.ok) throw new Error(\"Failed to fetch truck\");\r\n    return response.json();\r\n  }\r\n\r\n  async createTruck(truck: {\r\n    identifier: string;\r\n    arrival_date: string;\r\n    status: string;\r\n    notes?: string;\r\n    metrics?: TruckMetric[];\r\n  }): Promise<{ success: boolean; message: string; data: { id: string } }> {\r\n    const response = await fetch(`${API_BASE_URL}/trucks`, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(truck),\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (!response.ok) throw new Error(\"Failed to create truck\");\r\n    return response.json();\r\n  }\r\n\r\n  async updateTruck(\r\n    id: string,\r\n    truck: {\r\n      identifier: string;\r\n      arrival_date: string;\r\n      status: string;\r\n      notes?: string;\r\n      metrics?: TruckMetric[];\r\n    }\r\n  ): Promise<{ success: boolean; message: string }> {\r\n    const response = await fetch(`${API_BASE_URL}/trucks/${id}`, {\r\n      method: \"PUT\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(truck),\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (!response.ok) throw new Error(\"Failed to update truck\");\r\n    return response.json();\r\n  }\r\n\r\n  async deleteTruck(\r\n    id: string\r\n  ): Promise<{ success: boolean; message: string }> {\r\n    const response = await fetch(`${API_BASE_URL}/trucks/${id}`, {\r\n      method: \"DELETE\",\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (!response.ok) throw new Error(\"Failed to delete truck\");\r\n    return response.json();\r\n  }\r\n\r\n  async getAnalyticsSummary(): Promise<{\r\n    success: boolean;\r\n    data: AnalyticsSummary;\r\n  }> {\r\n    const response = await fetch(`${API_BASE_URL}/trucks/analytics/summary`, {\r\n      credentials: \"include\",\r\n    });\r\n\r\n    if (!response.ok) throw new Error(\"Failed to fetch analytics\");\r\n    return response.json();\r\n  }\r\n\r\n  async getAnalyticsByDate(dateFrom?: string, dateTo?: string): Promise<any> {\r\n    const params = new URLSearchParams();\r\n    if (dateFrom) params.append(\"dateFrom\", dateFrom);\r\n    if (dateTo) params.append(\"dateTo\", dateTo);\r\n\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/trucks/analytics/by-date?${params}`,\r\n      {\r\n        credentials: \"include\",\r\n      }\r\n    );\r\n\r\n    if (!response.ok) throw new Error(\"Failed to fetch analytics by date\");\r\n    return response.json();\r\n  }\r\n\r\n  async exportToExcel(filters?: {\r\n    identifier?: string;\r\n    dateFrom?: string;\r\n    dateTo?: string;\r\n    status?: string;\r\n  }): Promise<void> {\r\n    const params = new URLSearchParams();\r\n    if (filters?.identifier) params.append(\"identifier\", filters.identifier);\r\n    if (filters?.dateFrom) params.append(\"dateFrom\", filters.dateFrom);\r\n    if (filters?.dateTo) params.append(\"dateTo\", filters.dateTo);\r\n    if (filters?.status) params.append(\"status\", filters.status);\r\n\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/trucks/export/excel?${params}`,\r\n      {\r\n        credentials: \"include\",\r\n      }\r\n    );\r\n\r\n    if (!response.ok) throw new Error(\"Failed to export\");\r\n\r\n    const blob = await response.blob();\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `trucks-${new Date().toISOString().split(\"T\")[0]}.xlsx`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(url);\r\n    document.body.removeChild(a);\r\n  }\r\n}\r\n\r\nexport const trucksApiClient = new TrucksApiClient();\r\n"],"names":[],"mappings":"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"}}]
}