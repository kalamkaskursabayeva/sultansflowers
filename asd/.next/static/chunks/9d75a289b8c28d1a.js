(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97873,e=>{"use strict";var r=e.i(94606),t=e.i(23952);function a({className:e,type:a,...s}){return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,t.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>a])},72479,e=>{"use strict";var r=e.i(94606),t=e.i(62415);e.i(84233);var a=e.i(7233),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let i=(0,a.createSlot)(`Primitive.${s}`),l=t.forwardRef((e,t)=>{let{asChild:a,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(a?i:s,{...l,ref:t})});return l.displayName=`Primitive.${s}`,{...e,[s]:l}},{}),i=t.forwardRef((e,t)=>(0,r.jsx)(s.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var l=e.i(23952);function n({className:e,...t}){return(0,r.jsx)(i,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}e.s(["Label",()=>n],72479)},83159,e=>{"use strict";var r=e.i(94606),t=e.i(62415),a=e.i(35124),s=e.i(63918),i=e.i(97873),l=e.i(72479),n=e.i(42268),d=e.i(52572);function o(){let{user:e}=(0,d.useAuth)(),[o,c]=(0,t.useState)([]),[u,p]=(0,t.useState)(!0),[m,x]=(0,t.useState)(!1),[h,g]=(0,t.useState)({name:"",email:"",phone:"",password:""}),[b,f]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{if(e?.id)try{let r=await n.api.getAllUsers(e.id);r.success&&c(r.users.filter(e=>"worker"===e.role))}catch(e){console.error("Error fetching employees:",e)}finally{p(!1)}})()},[e]);let y=async r=>{if(r.preventDefault(),f(""),e?.id)try{let r={email:h.email,password:h.password,name:h.name,phone:h.phone,role:"worker"},t=await n.api.register(r);if(t.success){let r=await n.api.getAllUsers(e.id);r.success&&c(r.users.filter(e=>"worker"===e.role)),g({name:"",email:"",phone:"",password:""}),x(!1)}else f(t.error||"Ошибка при добавлении сотрудника")}catch(e){console.error("Error adding employee:",e),f("Ошибка при добавлении сотрудника")}},v=async r=>{if(e?.id&&confirm("Вы уверены, что хотите удалить сотрудника?"))try{await n.api.deleteUser(e.id,r),c(o.filter(e=>e.id!==r))}catch(e){console.error("Error deleting employee:",e),alert("Ошибка при удалении сотрудника")}};return u?(0,r.jsx)(a.DashboardLayout,{title:"Управление сотрудниками",requiredRole:"admin",children:(0,r.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-[#568a56] border-t-transparent rounded-full"})})}):(0,r.jsxs)(a.DashboardLayout,{title:"Управление сотрудниками",requiredRole:"admin",children:[(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)(s.Button,{onClick:()=>x(!m),className:"bg-[#568a56] hover:bg-[#457245]",children:"+ Добавить сотрудника"})}),m&&(0,r.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Новый сотрудник"}),(0,r.jsxs)("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{htmlFor:"name",children:"ФИО"}),(0,r.jsx)(i.Input,{id:"name",value:h.name,onChange:e=>g({...h,name:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{htmlFor:"email",children:"Email"}),(0,r.jsx)(i.Input,{id:"email",type:"email",value:h.email,onChange:e=>g({...h,email:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{htmlFor:"phone",children:"Телефон"}),(0,r.jsx)(i.Input,{id:"phone",value:h.phone,onChange:e=>g({...h,phone:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.Label,{htmlFor:"password",children:"Пароль"}),(0,r.jsx)(i.Input,{id:"password",type:"password",value:h.password,onChange:e=>g({...h,password:e.target.value}),required:!0,minLength:6})]}),b&&(0,r.jsx)("p",{className:"text-red-500 text-sm col-span-2",children:b}),(0,r.jsxs)("div",{className:"col-span-2 flex gap-3",children:[(0,r.jsx)(s.Button,{type:"submit",className:"bg-[#568a56] hover:bg-[#457245]",children:"Добавить"}),(0,r.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Отмена"})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Сотрудник"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Телефон"}),(0,r.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Дата добавления"}),(0,r.jsx)("th",{className:"text-right px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Действия"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===o.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:"Сотрудники не добавлены"})}):o.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]}),(0,r.jsx)("td",{className:"px-6 py-4 text-gray-700",children:e.phone}),(0,r.jsx)("td",{className:"px-6 py-4 text-gray-500 text-sm",children:e.created_at?new Date(e.created_at).toLocaleDateString("ru-RU"):"-"}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>v(e.id),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:"Удалить"})})]},e.id))})]})})]})}e.s(["default",()=>o])}]);