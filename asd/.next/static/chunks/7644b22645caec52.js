(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42268,e=>{"use strict";let t=e.i(25482).default.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",r=new class{baseURL;constructor(){this.baseURL=t}buildQuery(e){let t={};return e&&Object.entries(e).forEach(([e,r])=>{null!=r&&(t[e]=String(r))}),new URLSearchParams(t).toString()}async request(e,t={}){let r=`${this.baseURL}${e}`,s={headers:{"Content-Type":"application/json",...t.headers},...t};try{let t=await fetch(r,s),a=t.headers.get("content-type")||"";if(console.log(`[API] ${e} - Status: ${t.status}, Content-Type: ${a}`),a.includes("application/json")){let e=await t.json().catch(()=>({error:`HTTP ${t.status}: ${t.statusText}`}));if(!t.ok)return{success:!1,error:e.error||`HTTP ${t.status}: ${t.statusText}`,...e};return e}if(a.includes("text/csv")||a.includes("text/plain")){let r=await t.text();if(console.log(`[API] ${e} - CSV text length: ${r.length}`),!t.ok)return{success:!1,error:`HTTP ${t.status}: ${t.statusText}`};return r}if(a.includes("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet")||a.includes("application/octet-stream")){let e=await t.blob();if(!t.ok)return{success:!1,error:`HTTP ${t.status}: ${t.statusText}`};return e}try{let e=await t.json();if(!t.ok)return{success:!1,error:e.error||`HTTP ${t.status}: ${t.statusText}`,...e};return e}catch(r){let e=await t.text();if(!t.ok)return{success:!1,error:`HTTP ${t.status}: ${t.statusText}`};return e}}catch(e){return console.error("API Request Error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async register(e){return this.request("/users/register",{method:"POST",body:JSON.stringify(e)})}async login(e,t){return this.request("/users/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getAllUsers(e){return this.request(`/users/admin/users?adminId=${e}`)}async updateUserRole(e,t,r){return this.request(`/users/admin/users/${t}/role`,{method:"PUT",body:JSON.stringify({adminId:e,newRole:r})})}async deleteUser(e,t){return this.request(`/users/admin/users/${t}?adminId=${e}`,{method:"DELETE"})}async updateUser(e,t,r){return this.request(`/users/admin/users/${t}`,{method:"PUT",body:JSON.stringify({adminId:e,...r})})}async changeUserPassword(e,t,r){return this.request(`/users/admin/users/${t}/password`,{method:"PUT",body:JSON.stringify({adminId:e,newPassword:r})})}async getProducts(){return this.request("/products")}async getProduct(e){return this.request(`/products/${e}`)}async createProduct(e,t){return this.request("/products",{method:"POST",body:JSON.stringify({userId:e,...t})})}async updateProduct(e,t,r){return this.request(`/products/${t}`,{method:"PUT",body:JSON.stringify({userId:e,...r})})}async deleteProduct(e,t){return this.request(`/products/${t}?adminId=${e}`,{method:"DELETE"})}async createOrder(e){return this.request("/orders",{method:"POST",body:JSON.stringify(e)})}async getUserOrders(e){return this.request(`/orders/user/${e}`)}async getAllOrders(e){return this.request(`/orders/all?userId=${e}`)}async confirmOrder(e,t){return this.request(`/orders/${t}/confirm`,{method:"PUT",body:JSON.stringify({userId:e})})}async updateOrderStatus(e,t,r){return this.request(`/orders/${t}/status`,{method:"PUT",body:JSON.stringify({userId:e,status:r})})}async getUserPreorders(e){return this.request(`/preorders/user/${e}`)}async getAllPreorders(e){return this.request(`/preorders/all?userId=${e}`)}async getLogs(e,t={}){let r=new URLSearchParams({adminId:e,...t});return this.request(`/logs?${r.toString()}`)}async getLogsStats(e){return this.request(`/logs/stats?adminId=${e}`)}async cleanOldLogs(e,t=90){return this.request("/logs/clean",{method:"DELETE",body:JSON.stringify({adminId:e,days:t})})}async getFlowers(){return this.request("/flowers")}async getFlower(e){return this.request(`/flowers/${e}`)}async createFlower(e,t){return this.request("/flowers",{method:"POST",body:JSON.stringify({userId:e,...t})})}async updateFlower(e,t,r){return this.request(`/flowers/${t}`,{method:"PUT",body:JSON.stringify({userId:e,...r})})}async deleteFlower(e,t){return this.request(`/flowers/${t}?adminId=${e}`,{method:"DELETE"})}async updateProfile(e,t){return this.request(`/users/profile/${e}`,{method:"PUT",body:JSON.stringify(t)})}async getProfileStats(e){return this.request(`/users/profile/${e}/stats`)}async getCart(e){return this.request(`/cart/user/${e}`)}async addToCart(e,t,r){return this.request("/cart",{method:"POST",body:JSON.stringify({userId:e,product_id:t,quantity:r})})}async updateCartItem(e,t,r){return this.request(`/cart/${e}`,{method:"PUT",body:JSON.stringify({userId:t,quantity:r})})}async removeFromCart(e,t){return this.request(`/cart/${e}?userId=${t}`,{method:"DELETE"})}async clearCart(e){return this.request(`/cart/user/${e}/clear`,{method:"DELETE"})}async getInventoryBatches(e){let t=this.buildQuery(e);return this.request(`/inventory/batches${t?"?"+t:""}`)}async getInventoryBatch(e){return this.request(`/inventory/batches/${e}`)}async createInventoryBatch(e){return this.request("/inventory/batches",{method:"POST",body:JSON.stringify(e)})}async updateInventoryBatch(e,t){return this.request(`/inventory/batches/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteInventoryBatch(e,t){return this.request(`/inventory/batches/${e}?userId=${t}`,{method:"DELETE"})}async getInventoryPriceComparison(e){let t=this.buildQuery(e);return this.request(`/inventory/analytics/price-comparison${t?"?"+t:""}`)}async getInventoryByCategory(e){let t=this.buildQuery(e);return this.request(`/inventory/analytics/by-category${t?"?"+t:""}`)}async exportInventoryCSV(e){let t=this.buildQuery(e);return this.request(`/inventory/export/csv${t?"?"+t:""}`)}async exportInventoryJSON(e){let t=this.buildQuery(e);return this.request(`/inventory/export/json${t?"?"+t:""}`)}async getCurrentShift(e){return this.request(`/shifts/current/${e}`)}async getShifts(e){let t=new URLSearchParams(e).toString();return this.request(`/shifts${t?"?"+t:""}`)}async getShift(e){return this.request(`/shifts/${e}`)}async openShift(e){return this.request("/shifts/open",{method:"POST",body:JSON.stringify(e)})}async closeShift(e){return this.request("/shifts/close",{method:"POST",body:JSON.stringify(e)})}async addShiftSale(e){return this.request("/shifts/sale",{method:"POST",body:JSON.stringify(e)})}async updateShiftSale(e,t){return this.request(`/shifts/sales/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteShiftSale(e){return this.request(`/shifts/sales/${e}`,{method:"DELETE"})}async getSellerActiveOrders(e){return this.request(`/shifts/seller/${e}/active-orders`)}async getShiftAnalyticsBySeller(e){let t=new URLSearchParams(e).toString();return this.request(`/shifts/analytics/by-seller${t?"?"+t:""}`)}async getShiftAnalyticsByDay(e){let t=new URLSearchParams(e).toString();return this.request(`/shifts/analytics/by-day${t?"?"+t:""}`)}async exportShiftsCSV(e){let t=new URLSearchParams(e).toString();return this.request(`/shifts/export/csv${t?"?"+t:""}`)}async getCalendarEvents(e){let t=new URLSearchParams(e).toString();return this.request(`/calendar/events${t?"?"+t:""}`)}async getCalendarMonthEvents(e,t){return this.request(`/calendar/events/month/${e}/${t}`)}async createCalendarEvent(e){return this.request("/calendar/events",{method:"POST",body:JSON.stringify(e)})}async updateCalendarEvent(e,t){return this.request(`/calendar/events/${e}`,{method:"PUT",body:JSON.stringify(t)})}async markEventAsRead(e){return this.request(`/calendar/events/${e}/read`,{method:"POST"})}async deleteCalendarEvent(e,t){return this.request(`/calendar/events/${e}?userId=${t}`,{method:"DELETE"})}async getAnalyticsThresholds(){return this.request("/calendar/thresholds")}async updateAnalyticsThreshold(e,t){return this.request(`/calendar/thresholds/${e}`,{method:"PUT",body:JSON.stringify(t)})}async getAnalyticsSummary(e){let t=new URLSearchParams(e).toString();return this.request(`/calendar/summary${t?"?"+t:""}`)}async getTopProducts(e){let t=new URLSearchParams(e).toString();return this.request(`/calendar/top-products${t?"?"+t:""}`)}async getAvailableOrders(){return this.request("/shifts/available-orders")}async acceptOrder(e,t){return this.request(`/shifts/accept-order/${e}/${t}`,{method:"POST"})}async exportShiftsExcel(e){let t=`${this.baseURL}/shifts/export/excel/${e}`;try{let r=await fetch(t);if(!r.ok)throw Error("Export failed");let s=await r.blob(),a=window.URL.createObjectURL(s),n=document.createElement("a");return n.href=a,n.download=`Shift_${e}_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a),{success:!0}}catch(e){throw console.error("Export Error:",e),e}}async generateCalendarEvents(e){return this.request("/calendar/generate-events",{method:"POST",body:JSON.stringify({userId:e})})}};e.s(["api",0,r,"createOrder",0,e=>r.createOrder(e)])},52572,e=>{"use strict";var t=e.i(94606),r=e.i(62415),s=e.i(42268);let a=(0,r.createContext)(void 0);function n({children:e}){let[n,o]=(0,r.useState)(null),[i,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("greenflowers_user");if(e)try{o(JSON.parse(e))}catch{localStorage.removeItem("greenflowers_user")}u(!1)},[]);let c=async(e,t)=>{try{let r=await s.api.login(e,t);if(r.success&&r.user)return o(r.user),localStorage.setItem("greenflowers_user",JSON.stringify(r.user)),{success:!0};return{success:!1,error:"Ошибка входа"}}catch(e){return{success:!1,error:e.message||"Неверный email или пароль"}}},l=async e=>{try{let t=await s.api.register({email:e.email,password:e.password,name:e.name,phone:e.phone,city:e.city,company_name:void 0});if(t.success&&t.user)return o(t.user),localStorage.setItem("greenflowers_user",JSON.stringify(t.user)),{success:!0};return{success:!1,error:"Ошибка регистрации"}}catch(e){return{success:!1,error:e.message||"Пользователь с таким email уже существует"}}};return(0,t.jsx)(a.Provider,{value:{user:n,isLoading:i,login:c,register:l,logout:()=>{o(null),localStorage.removeItem("greenflowers_user")},updateUser:e=>{o(e),localStorage.setItem("greenflowers_user",JSON.stringify(e))},isAuthenticated:!!n},children:e})}function o(){let e=(0,r.useContext)(a);if(!e)throw Error("useAuth must be used within AuthProvider");return e}e.s(["AuthProvider",()=>n,"useAuth",()=>o])},11983,(e,t,r)=>{t.exports=e.r(84155)},62411,e=>{"use strict";var t=e.i(94606),r=e.i(62415);let s=(0,r.createContext)(void 0);function a({children:e}){let[a,n]=(0,r.useState)("en"),[o,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{i(!0);let e=localStorage.getItem("language"),t=navigator.language.split("-")[0];n(e||(["en","ru","kk"].includes(t)?t:"en"))},[]),(0,t.jsx)(s.Provider,{value:{language:a,setLanguage:e=>{n(e),localStorage.setItem("language",e)},isClient:o},children:e})}function n(){let e=(0,r.useContext)(s);if(!e)throw Error("useLanguageContext must be used within LanguageProvider");return e}e.s(["LanguageProvider",()=>a,"useLanguageContext",()=>n])},34606,e=>{"use strict";var t=e.i(94606),r=e.i(62415),s=e.i(42268);let a=(0,r.createContext)(void 0);function n({children:e}){let[n,o]=(0,r.useState)([]),[i,u]=(0,r.useState)(!1),[c,l]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("greenflowers_user");if(e)try{let t=JSON.parse(e);l(t.id)}catch(e){console.error("Error loading user:",e)}},[]),(0,r.useEffect)(()=>{c&&d()},[c]);let d=async()=>{if(c){u(!0);try{let e=await s.api.getCart(c);e.success&&o(e.cart||[])}catch(e){console.error("Error loading cart:",e)}finally{u(!1)}}},h=async(e,t)=>{if(!c){let r=JSON.parse(localStorage.getItem("temp_cart")||"[]");r.push({product:e,quantity:t}),localStorage.setItem("temp_cart",JSON.stringify(r)),alert("Войдите в аккаунт чтобы сохранить корзину");return}try{(await s.api.addToCart(c,e.id,t)).success&&await d()}catch(e){console.error("Error adding to cart:",e),alert("Ошибка при добавлении в корзину")}},y=async e=>{if(c)try{(await s.api.removeFromCart(e,c)).success&&await d()}catch(e){console.error("Error removing from cart:",e)}},f=async(e,t)=>{if(c)try{(await s.api.updateCartItem(e,c,t)).success&&await d()}catch(e){console.error("Error updating cart:",e)}},g=async()=>{if(c)try{(await s.api.clearCart(c)).success&&o([])}catch(e){console.error("Error clearing cart:",e)}};return(0,t.jsx)(a.Provider,{value:{cart:n,loading:i,addToCart:h,removeFromCart:y,updateQuantity:f,clearCart:g,getCartTotal:()=>n.reduce((e,t)=>e+Number(t.price_per_box||50*Number(t.price_per_unit||0))*t.quantity,0),getCartCount:()=>n.reduce((e,t)=>e+t.quantity,0),loadCart:d},children:e})}function o(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}e.s(["CartProvider",()=>n,"useCart",()=>o])},23289,e=>{"use strict";var t=e.i(25482),r=e.i(62415),s=e.i(11983);function a(){return"undefined"!=typeof window}function n(){return"production"}function o(){return"development"===((a()?window.vam:n())||"production")}function i(e){return RegExp(`/${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?=[/?#]|$)`)}function u(e){return(0,r.useEffect)(()=>{var t;e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),(0,r.useEffect)(()=>{!function(e={debug:!0}){var t;if(!a())return;!function(e="auto"){if("auto"===e){window.vam=n();return}window.vam=e}(e.mode),window.va||(window.va=function(...e){(window.vaq=window.vaq||[]).push(e)}),e.beforeSend&&(null==(t=window.va)||t.call(window,"beforeSend",e.beforeSend));let r=e.scriptSrc?e.scriptSrc:o()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js";if(document.head.querySelector(`script[src*="${r}"]`))return;let s=document.createElement("script");s.src=r,s.defer=!0,s.dataset.sdkn="@vercel/analytics"+(e.framework?`/${e.framework}`:""),s.dataset.sdkv="1.6.1",e.disableAutoTrack&&(s.dataset.disableAutoTrack="1"),e.endpoint?s.dataset.endpoint=e.endpoint:e.basePath&&(s.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(s.dataset.dsn=e.dsn),s.onerror=()=>{let e=o()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${r}. ${e}`)},o()&&!1===e.debug&&(s.dataset.debug="false"),document.head.appendChild(s)}({framework:e.framework||"react",basePath:e.basePath??function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}(),...void 0!==e.route&&{disableAutoTrack:!0},...e})},[]),(0,r.useEffect)(()=>{e.route&&e.path&&function({route:e,path:t}){var r;null==(r=window.va)||r.call(window,"pageview",{route:e,path:t})}({route:e.route,path:e.path})},[e.route,e.path]),null}function c(e){let a,n,o,{route:c,path:l}=(a=(0,s.useParams)(),n=(0,s.useSearchParams)(),o=(0,s.usePathname)(),a?{route:function(e,t){if(!e||!t)return e;let r=e;try{let e=Object.entries(t);for(let[t,s]of e)if(!Array.isArray(s)){let e=i(s);e.test(r)&&(r=r.replace(e,`/[${t}]`))}for(let[t,s]of e)if(Array.isArray(s)){let e=i(s.join("/"));e.test(r)&&(r=r.replace(e,`/[...${t}]`))}return r}catch(t){return e}}(o,Object.keys(a).length?a:Object.fromEntries(n.entries())),path:o}:{route:null,path:o});return r.default.createElement(u,{path:l,route:c,...e,basePath:function(){if(void 0!==t.default&&void 0!==t.default.env)return t.default.env.NEXT_PUBLIC_VERCEL_OBSERVABILITY_BASEPATH}(),framework:"next"})}function l(e){return r.default.createElement(r.Suspense,{fallback:null},r.default.createElement(c,{...e}))}e.s(["Analytics",()=>l])}]);