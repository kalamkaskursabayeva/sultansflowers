(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34772,e=>{"use strict";let t=[{id:"admin-1",email:"admin@greenflowers.kz",name:"Администратор",phone:"+7 708 235 4533",role:"admin",createdAt:new Date("2024-01-01")},{id:"employee-1",email:"worker@greenflowers.kz",name:"Работник Склада",phone:"+7 777 111 2222",role:"employee",createdAt:new Date("2024-03-01")},{id:"client-1",email:"client@test.kz",name:"Иван Петров",phone:"+7 777 333 4444",role:"user",city:"Алматы",createdAt:new Date("2024-06-01")}];e.s(["kazakhstanCities",0,[{id:"almaty",name:{ru:"Алматы",en:"Almaty",kk:"Алматы"}},{id:"astana",name:{ru:"Астана",en:"Astana",kk:"Астана"}},{id:"shymkent",name:{ru:"Шымкент",en:"Shymkent",kk:"Шымкент"}},{id:"karaganda",name:{ru:"Караганда",en:"Karaganda",kk:"Қарағанды"}},{id:"aktobe",name:{ru:"Актобе",en:"Aktobe",kk:"Ақтөбе"}},{id:"taraz",name:{ru:"Тараз",en:"Taraz",kk:"Тараз"}},{id:"pavlodar",name:{ru:"Павлодар",en:"Pavlodar",kk:"Павлодар"}},{id:"ust-kamenogorsk",name:{ru:"Усть-Каменогорск",en:"Ust-Kamenogorsk",kk:"Өскемен"}},{id:"semey",name:{ru:"Семей",en:"Semey",kk:"Семей"}},{id:"atyrau",name:{ru:"Атырау",en:"Atyrau",kk:"Атырау"}},{id:"kostanay",name:{ru:"Костанай",en:"Kostanay",kk:"Қостанай"}},{id:"petropavlovsk",name:{ru:"Петропавловск",en:"Petropavlovsk",kk:"Петропавл"}},{id:"oral",name:{ru:"Уральск",en:"Oral",kk:"Орал"}},{id:"aktau",name:{ru:"Актау",en:"Aktau",kk:"Ақтау"}},{id:"kyzylorda",name:{ru:"Кызылорда",en:"Kyzylorda",kk:"Қызылорда"}},{id:"turkestan",name:{ru:"Туркестан",en:"Turkestan",kk:"Түркістан"}}],"mockUsers",0,t])},55828,e=>{"use strict";var t=e.i(34772);let a=[{id:"PRE-001",clientId:"client-4",clientName:"ТОО Праздник",clientPhone:"+7 777 111 2222",cityId:"almaty",items:[{productId:14,productName:"8 Марта микс",quantity:50,pricePerBox:75e3,total:375e4},{productId:12,productName:"Тюльпаны весенняя коллекция",quantity:20,pricePerBox:35e3,total:7e5}],total:445e4,status:"confirmed",holidayType:"march8",deliveryDate:"2025-03-01",createdAt:new Date("2024-11-15"),notes:"Крупный заказ на 8 Марта"},{id:"PRE-002",clientId:"client-5",clientName:"Цветы 24",clientPhone:"+7 777 999 0000",cityId:"astana",items:[{productId:13,productName:"Валентинов микс красный",quantity:30,pricePerBox:9e4,total:27e5}],total:27e5,status:"pending",holidayType:"valentine",deliveryDate:"2025-02-10",createdAt:new Date("2024-12-01")}];function s(e,a="ru"){let r=t.kazakhstanCities.find(t=>t.id===e);return r?.name[a]||e}function r(e,t="ru"){return({pending:{ru:"Ожидает",en:"Pending",kk:"Күтуде"},confirmed:{ru:"Подтверждён",en:"Confirmed",kk:"Расталды"},in_transit:{ru:"В пути",en:"In Transit",kk:"Жолда"},delivered:{ru:"Доставлен",en:"Delivered",kk:"Жеткізілді"},cancelled:{ru:"Отменён",en:"Cancelled",kk:"Бас тартылды"}})[e]?.[t]||e}function n(e){switch(e){case"pending":return"bg-yellow-100 text-yellow-700";case"confirmed":return"bg-blue-100 text-blue-700";case"in_transit":return"bg-indigo-100 text-indigo-700";case"delivered":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}}e.s(["getCityName",()=>s,"getStatusColor",()=>n,"getStatusLabel",()=>r,"holidayTypes",0,[{id:"valentine",name:{ru:"14 Февраля (День Святого Валентина)",en:"Valentine's Day",kk:"14 Ақпан"}},{id:"march8",name:{ru:"8 Марта (Международный женский день)",en:"International Women's Day",kk:"8 Наурыз"}},{id:"nauryz",name:{ru:"Наурыз (21-23 марта)",en:"Nauryz",kk:"Наурыз"}},{id:"mothersday",name:{ru:"День Матери",en:"Mother's Day",kk:"Аналар күні"}},{id:"september1",name:{ru:"1 Сентября (День Знаний)",en:"Knowledge Day",kk:"1 Қыркүйек"}},{id:"teachersday",name:{ru:"День Учителя",en:"Teacher's Day",kk:"Мұғалімдер күні"}},{id:"newyear",name:{ru:"Новый Год",en:"New Year",kk:"Жаңа Жыл"}},{id:"other",name:{ru:"Другой праздник",en:"Other Holiday",kk:"Басқа мереке"}}],"mockPreorders",0,a])},61413,e=>{"use strict";var t=e.i(94606),a=e.i(62415),s=e.i(11983),r=e.i(35124),n=e.i(52572),i=e.i(55828),l=e.i(30065);function d({params:e}){let d,c=(0,s.useRouter)(),{user:o}=(0,n.useAuth)(),[m,x]=(0,a.useState)(null),[u,h]=(0,a.useState)(!0),[p,y]=(0,a.useState)("");if((0,a.useEffect)(()=>{(async()=>{let{id:t}=await e;y(t)})()},[e]),(0,a.useEffect)(()=>{p&&o?.id&&(async()=>{try{let e=await fetch(`http://localhost:5000/api/orders/${p}`),t=await e.json();t.success&&(t.order.user_id===o.id?x(t.order):c.push("/client/orders"))}catch(e){console.error("Error fetching order:",e)}finally{h(!1)}})()},[p,o,c]),u)return(0,t.jsx)(r.DashboardLayout,{title:"Детали заказа",requiredRole:"user",children:(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-[#568a56] border-t-transparent rounded-full"})})});if(!m)return(0,t.jsx)(r.DashboardLayout,{title:"Детали заказа",requiredRole:"user",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Заказ не найден"}),(0,t.jsx)(l.default,{href:"/client/orders",className:"text-[#568a56] hover:underline",children:"Вернуться к заказам"})]})});let g=[{label:"Ожидает обработки",status:"pending",completed:(d=["pending","confirmed","processing","shipped","delivered"].indexOf(m.status))>=0},{label:"Подтвержден",status:"confirmed",completed:d>=1},{label:"В обработке",status:"processing",completed:d>=2},{label:"Отправлен",status:"shipped",completed:d>=3},{label:"Доставлен",status:"delivered",completed:d>=4}];return(0,t.jsxs)(r.DashboardLayout,{title:"Детали заказа",requiredRole:"user",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)(l.default,{href:"/client/orders",className:"text-[#568a56] hover:underline flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Назад к заказам"]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Заказ #",m.id]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Создан: ",new Date(m.created_at).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("div",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium ${(0,i.getStatusColor)(m.status)}`,children:(0,i.getStatusLabel)(m.status)})})]})}),"cancelled"!==m.status&&(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Статус заказа"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200"}),(0,t.jsx)("div",{className:"absolute top-5 left-0 h-0.5 bg-[#568a56] transition-all duration-500",style:{width:`${(g.filter(e=>e.completed).length-1)*25}%`}}),(0,t.jsx)("div",{className:"relative flex justify-between",children:g.map((e,a)=>(0,t.jsxs)("div",{className:"flex flex-col items-center",style:{width:"20%"},children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${e.completed?"bg-[#568a56] border-[#568a56] text-white":"bg-white border-gray-300 text-gray-400"}`,children:e.completed?(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})}):(0,t.jsx)("span",{className:"text-sm font-medium",children:a+1})}),(0,t.jsx)("p",{className:`mt-2 text-xs text-center ${e.completed?"text-gray-900 font-medium":"text-gray-500"}`,children:e.label})]},e.status))})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Информация о доставке"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Имя получателя"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:m.customer_name||"Не указано"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Телефон WhatsApp"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:m.customer_phone||"Не указан"})]}),m.customer_email&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:m.customer_email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Город доставки"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:m.delivery_city})]}),m.delivery_address&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Адрес доставки"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:m.delivery_address})]}),m.delivery_date&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Желаемая дата доставки"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:new Date(m.delivery_date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Оплата"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Способ оплаты"}),(0,t.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:m.payment_method?.replace("_"," ")||"Не указан"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Статус оплаты"}),(0,t.jsx)("span",{className:`inline-block px-2 py-1 text-xs rounded-full ${"paid"===m.payment_status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:"paid"===m.payment_status?"Оплачено":"Ожидает оплаты"})]}),m.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Примечание к заказу"}),(0,t.jsx)("p",{className:"font-medium text-gray-900",children:m.notes})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Товары в заказе"}),(0,t.jsx)("div",{className:"space-y-3",children:m.items&&m.items.length>0?m.items.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.product_name||`Товар #${e.product_id}`}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Количество: ",e.quantity," шт."]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-medium text-gray-900",children:[Number(e.unit_price).toLocaleString()," ₸"]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Итого: ",(Number(e.quantity)*Number(e.unit_price)).toLocaleString()," ₸"]})]})]},a)):(0,t.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Нет товаров"})}),(0,t.jsx)("div",{className:"mt-6 pt-4 border-t-2 border-gray-200",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Итого к оплате:"}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-[#568a56]",children:[Number(m.total_amount||0).toLocaleString()," ₸"]})]})})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-900 mb-1",children:"Нужна помощь?"}),(0,t.jsxs)("p",{className:"text-blue-800 text-sm",children:["Если у вас есть вопросы по заказу, свяжитесь с нами в WhatsApp:",(0,t.jsx)("a",{href:`https://wa.me/${m.customer_phone?.replace(/[^0-9]/g,"")}`,className:"font-medium underline ml-1",children:m.customer_phone})]})]})]})})]})]})}e.s(["default",()=>d])}]);