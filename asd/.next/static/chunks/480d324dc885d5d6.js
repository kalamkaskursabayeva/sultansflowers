(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97873,e=>{"use strict";var t=e.i(94606),r=e.i(23952);function s({className:e,type:s,...a}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>s])},19022,e=>{"use strict";var t=e.i(94606),r=e.i(62415),s=e.i(35124),a=e.i(63918),i=e.i(97873),n=e.i(42268),l=e.i(52572);function d(){let{user:e}=(0,l.useAuth)(),[d,c]=(0,r.useState)([]),[o,x]=(0,r.useState)(""),[u,p]=(0,r.useState)(null),[m,h]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[b,f]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=await n.api.getProducts();e.success&&c(e.products)}catch(e){console.error("Error fetching products:",e)}finally{f(!1)}})()},[]);let j=d.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.category.toLowerCase().includes(o.toLowerCase())),v=async t=>{if(e?.id)try{let r=d.find(e=>e.id===t);if(!r)return;await n.api.updateProduct(e.id,t,{...r,price_per_box:parseFloat(m)||r.price_per_box,stock_quantity:parseInt(g)||r.stock_quantity}),c(d.map(e=>e.id===t?{...e,price_per_box:parseFloat(m)||e.price_per_box,stock_quantity:parseInt(g)||e.stock_quantity}:e)),p(null)}catch(e){console.error("Error updating product:",e),alert("Ошибка при обновлении товара")}};return(0,t.jsxs)(s.DashboardLayout,{title:"Управление товарами",requiredRole:"admin",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(i.Input,{placeholder:"Поиск по названию или категории...",value:o,onChange:e=>x(e.target.value),className:"max-w-md"})}),b?(0,t.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[(0,t.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-[#568a56] border-t-transparent rounded-full mx-auto"}),(0,t.jsx)("p",{className:"text-gray-500 mt-4",children:"Загрузка товаров..."})]}):(0,t.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Товар"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Категория"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Упаковка"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"В наличии"}),(0,t.jsx)("th",{className:"text-left px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Цена/коробка"}),(0,t.jsx)("th",{className:"text-right px-6 py-3 text-xs font-medium text-gray-500 uppercase",children:"Действия"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:j.map(e=>{var r;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.variety||e.color})]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:{roses:"Розы",chrysanthemums:"Хризантемы",carnations:"Гвоздики",gypsophila:"Гипсофила",lilies:"Лилии",gerberas:"Герберы",seasonal:"Сезонные",holiday:"Праздничные"}[r=e.category]||r})}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-700",children:e.packaging_type}),(0,t.jsx)("td",{className:"px-6 py-4",children:u===e.id?(0,t.jsx)(i.Input,{type:"number",value:g,onChange:e=>y(e.target.value),className:"w-20"}):(0,t.jsxs)("span",{className:"text-gray-700",children:[e.stock_quantity," шт."]})}),(0,t.jsx)("td",{className:"px-6 py-4",children:u===e.id?(0,t.jsx)(i.Input,{type:"number",value:m,onChange:e=>h(e.target.value),className:"w-28"}):(0,t.jsxs)("span",{className:"font-medium text-gray-900",children:[e.price_per_box?.toLocaleString()," KZT"]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:u===e.id?(0,t.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,t.jsx)(a.Button,{size:"sm",onClick:()=>v(e.id),className:"bg-[#568a56]",children:"Сохранить"}),(0,t.jsx)(a.Button,{size:"sm",variant:"outline",onClick:()=>p(null),children:"Отмена"})]}):(0,t.jsx)(a.Button,{size:"sm",variant:"outline",onClick:()=>{p(e.id),h(e.price_per_box?.toString()||""),y(e.stock_quantity?.toString()||"")},children:"Изменить"})})]},e.id)})})]})})]})}e.s(["default",()=>d])}]);